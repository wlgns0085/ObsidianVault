# ROS2 Docker
ROS2 humble이 포함된 공식 Docker 이미지를 기반으로 컨테이너 생성
이미지: ros:humble-perception-jammy

1. docker 이미지 다운로드
```
docker pull ros:humble-perception-jammy
```

2. docker 컨테이너 생성
```
sudo docker run -it --privileged \
                 -v `pwd`:/work \
                 -h mavros \
                 --name=mavros \
                 -e DISPLAY=unix$DISPLAY \
                 --net host \
                 --device=/dev/ttyACM0 \
                 --device=/dev/ttyACM1 \
                 ros:humble-perception-jammy
```
- 해당 명령어 혹은 스크립트 실행 위치가 도커 컨테이너 내에서 /work 폴더로 공유되므로 실행 위치를 유의

3. ~/.bashrc에 아래 명령어 추가
```
source /opt/ros/humble/setup.bash
source /work/ardu_ws/install/setup.bash
export DISPLAY=:0
export QT_X11_NO_MITSHM=1
```

# MAVROS install

1. Ardupilot 공식문서에서 기술된  MAVROS 설치방법을 참고하여 설치
	- https://ardupilot.org/dev/docs/ros2.html#installation-ubuntu

2. Serail 포트로 연결된 FC로부터 수신한 메시지를 ROS2 메시지로 변환하는 mavros_node 실행
```
ros2 run mavros mavros_node \
  --ros-args \
  -p fcu_url:=/dev/ttyACM0:57600 \
  -p gcs_url:=udp://@192.168.1.114:14550 \
  -p target_system_id:=1 \
  -p target_component_id:=1
```

# ToDo
- FC Serial 포트 연결 시 이슈 해결방법 기술(dialout)