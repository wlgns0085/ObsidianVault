위성사진 다운로드
```
from osgeo import gdal

import pyproj

  

# ---------------------------

# 1️⃣ 중심 좌표 및 범위 설정

# ---------------------------

geod = pyproj.Geod(ellps="WGS84")

lat, lon = 36.4003667, 127.3373697  # 자운대 드론봇 시연장

# lat, lon = 37.475966, 127.017742 # 서울

radius_m = 1500                      # 반경 1.5km

output_file = "challenge_map_1m.tif" # 저장 파일 이름

  

# 북쪽, 남쪽, 동쪽, 서쪽으로 각각 1.5km 떨어진 위경도 계산

lon_w, lat_w, _ = geod.fwd(lon, lat, 270, radius_m)

lon_e, lat_e, _ = geod.fwd(lon, lat, 90, radius_m)

lon_n, lat_n, _ = geod.fwd(lon, lat, 0, radius_m)

lon_s, lat_s, _ = geod.fwd(lon, lat, 180, radius_m)

  

# WGS84 -> Web Mercator (EPSG:3857)

transformer = pyproj.Transformer.from_crs("EPSG:4326", "EPSG:3857", always_xy=True)

x_w, y_w = transformer.transform(lon_w, lat)

x_e, y_e = transformer.transform(lon_e, lat)

x_n, y_n = transformer.transform(lon, lat_n)

x_s, y_s = transformer.transform(lon, lat_s)

  

xmin = x_w

xmax = x_e

ymin = y_s

ymax = y_n

  

print(f"범위: ({xmin}, {ymin}) - ({xmax}, {ymax})")

# 36.3895203, 127.323895

# 36.4112116, 127.3508444

  

# ---------------------------

# 2️⃣ WMTS URL

# ---------------------------

wmts_url = (

    "WMTS:https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/"

    "MapServer/WMTS/1.0.0/WMTSCapabilities.xml"

)

  

# ---------------------------

# 3️⃣ 진행률 콜백 함수

# ---------------------------

def progress_callback(complete, message, unknown):

    print(f"진행률: {complete*100:.1f}%")

    return 1

  

# ---------------------------

# 4️⃣ GDAL Translate 실행

# ---------------------------

print("다운로드 및 래스터 생성 시작...")

gdal.Translate(

    output_file,

    wmts_url,

    projWin=[xmin, ymax, xmax, ymin],  # 좌표 순서: ulx, uly, lrx, lry

    xRes=1.0,  # 해상도 [m]

    yRes=1.0,

    format="GTiff",

    callback=progress_callback

)

print(f"완료! 파일 저장: {output_file}")
```